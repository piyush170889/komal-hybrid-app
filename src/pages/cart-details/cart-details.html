<!--
  Generated template for the CartDetailsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="navcol">
    <ion-title>Cart</ion-title>

    <ion-buttons end>
      <button ion-button clear (click)="clearAllCartItems()">
        Clear All
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content no-padding>

  <div *ngFor="let cartDetailKey of cartDetailsListKeys">

    <!-- <p>Key - {{ cartDetailKey }}</p> -->
    <!-- <p>Value = {{ undefined == cartDetails[cartDetailKey] || null == cartDetails[cartDetailKey]
      || '' == cartDetails[cartDetailKey] ? '' : JSON.stringify(cartDetails[cartDetailKey]) }}</p> -->
    <ion-card *ngIf="cartDetails[cartDetailKey] != null && cartDetails[cartDetailKey] != ''">

      <ion-card-header>
        <!-- <p>Value = {{ JSON.stringify(cartDetails[cartDetailKey][0]) }}</p> -->
        <ion-grid>
          <ion-row>
            <ion-col col-9>
              <ion-label class="icon-color"><b>{{ cartDetails[cartDetailKey][0].subCatName }}</b></ion-label>
              <!-- <ion-label class="icon-color"><b>SubCatName</b></ion-label> -->
            </ion-col>
            <ion-col col-3>
              <button ion-button clear icon-end (click)="removeSubCatAllProducts(cartDetailKey)">
                <ion-icon class="icon-color" ios="ios-cart" md="md-cart"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>

      </ion-card-header>

      <ion-card-content style="margin-top: -15%">
        <ion-grid>

          <ion-row>
            <ion-col col-4>
              <ion-label><b>Type</b></ion-label>
            </ion-col>
            <ion-col col-5>
              <ion-label><b>Quantity</b></ion-label>
            </ion-col>
            <ion-col col-3></ion-col>
          </ion-row>

          <ion-row class="border" *ngFor="let cartDetailsObj of cartDetails[cartDetailKey]">
            <ion-col col-4>
              <ion-label class="center">{{ cartDetailsObj.uom }}</ion-label>
            </ion-col>
            <ion-col col-5>
              <ion-label>{{cartDetailsObj.selectedQty}}</ion-label>
              <!-- <ion-select [(ngModel)]="cartDetailsObj.selectedQty" style="width:100% !important; max-width: 100%;">
                <ion-option value="50">50</ion-option>
                <ion-option value="60">60</ion-option>
                <ion-option value="70">70</ion-option>
                <ion-option value="80">80</ion-option>
                <ion-option value="90">90</ion-option>
                <ion-option value="100">100</ion-option>
              </ion-select> -->
            </ion-col>
            <ion-col col-3>
              <button ion-button clear (click)="removeAnItemFromCart(cartDetailKey, cartDetailsObj)">
                <ion-icon class="icon-color" ios="ios-close-circle" md="md-close-circle"></ion-icon>
              </button>
            </ion-col>
          </ion-row>

        </ion-grid>
      </ion-card-content>
    </ion-card>
  </div>

  <div *ngIf="cartDetailsListKeys.length==0" class="fm-empty-page" style="margin-top: 40%;">
    <ion-icon name="ios-cart-outline"></ion-icon>
    <h4>Your Cart Is Empty</h4>
  </div>


</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-col col-10>Total items in Cart :
        </ion-col>
        <ion-col col-2>{{cartItemSize}}</ion-col>
      </ion-row>
    </ion-grid>

    <ion-grid>
      <ion-row *ngIf="userDetails != null && userDetails != '' && undefined != userDetails">
        <ion-col col-6>
          <button ion-button class="button-format" (click)="goToHomeScreen()">
            Back
          </button>
        </ion-col>
        <ion-col col-6>
          <button *ngIf="cartItemSize > 0" ion-button class="button-format" (click)="openReviewProductPage()">
            Proceed
          </button>
          <button *ngIf="cartItemSize <= 0" ion-button class="button-format" (click)="showNoCartItemMssg()">
            Proceed
          </button>
        </ion-col>
      </ion-row>

      <ion-row *ngIf="userDetails == null || userDetails == '' || undefined == userDetails">
        <ion-col col-6>
          <button ion-button class="button-format" (click)="goToHomeScreen()">
            Back
          </button>
        </ion-col>
        <ion-col col-6>
          <button ion-button class="button-format" (click)="goToLoginScreen()">
            Proceed
          </button>
        </ion-col>
      </ion-row>

    </ion-grid>

  </ion-toolbar>
</ion-footer>